CommonMetadata:
  $id: CommonMetadata
  marshmallow:
    class: nr_metadata.common.services.records.schema.NRCommonMetadataSchema
    generate: false
    imports:
      - import: nr_metadata.common.services.records.schema.NRCommonMetadataSchema
  ui:
    marshmallow:
      class: nr_metadata.common.services.records.ui_schema.NRCommonMetadataUISchema
      generate: false
      imports:
        - import: nr_metadata.common.services.records.ui_schema.NRCommonMetadataUISchema

  properties:
    title:
      type: fulltext+keyword # Main (original) title of the object/work.
      required: true
      label.cs: Název
      label.en: Title
      search: false

    additionalTitles[]:
      # Additional titles of the object/work such as subtitle, translatedTitle and alternativeTitle.
      ^label.cs: Další názvy
      ^label.en: Additional titles
      ^uniqueItems: true
      properties:
        title:
          type: i18nStr
          required: true
          search: false
        titleType:
          type: keyword
          required: true
          label.cs: Druh názvu
          label.en: Title type
          enum: [translatedTitle, alternativeTitle, subtitle, other]
          search: false
      marshmallow:
        class: nr_metadata.common.services.records.schema.AdditionalTitlesSchema
        imports:
          - import: nr_metadata.common.services.records.schema.AdditionalTitlesSchema
      ui:
        detail: additionalTitle
        marshmallow:
          class: nr_metadata.common.services.records.ui_schema.AdditionalTitlesUISchema
          imports:
            - import: nr_metadata.common.services.records.ui_schema.AdditionalTitlesUISchema

    creators[]:
      ^minItems: 1
      ^uniqueItems: true
      ^required: true
      ^label.cs: Autoři
      ^label.en: Authors

      use: 'nr-datatypes#NRAuthority'
      ui:
        detail: creator
      properties:
        affiliations[]:
          type: taxonomy
          vocabulary-type: institutions
          search: false
      # TODO: synteticke pole, ktere slouci fullName pro creators & contributors a faceta bude pouze
      # nad nim

    contributors[]:
      use: 'nr-datatypes#NRAuthority'
      ^label.cs: Přispěvatelé
      ^label.en: Contributors
      ^uniqueItems: true
      # TODO: pokud to pujde, udelat pro kuratora separatne creator a contributor a navic,
      # tahle vec by pak musela byt nested, protoze chceme cross-search role + fullName
      properties:
        role:
          use: 'nr-datatypes#NRAuthorityRole'
          search: false
        fullName:
          label.cs: Jméno přispěvatele
          label.en: Contributor name
          search: false
        affiliations[]:
          type: taxonomy
          vocabulary-type: institutions
          search: false
      ui:
        detail: contributor
        marshmallow:
          class: nr_metadata.common.services.records.ui_schema.NRContributorUISchema
          imports:
            - import: nr_metadata.common.services.records.ui_schema.NRContributorUISchema
      marshmallow:
        class: nr_metadata.common.services.records.schema.NRContributorSchema
        imports:
          - import: nr_metadata.common.services.records.schema.NRContributorSchema

    resourceType:
      # Taxonomy driven typology of objects that's possible to store in the repository
      use: 'nr-datatypes#NRResourceType'
      required: true
      # search: true

    dateAvailable:
      # The date the resource is publicly available in a repository.
      #
      # týká se dokumentu, nikoliv metadat!!!
      # stejně jako pro data, budou se přes něj řídit přístupy - embargo
      use: 'nr-datatypes#NRDate'
      sample:
        faker: date
      label.cs: Datum zveřejnění
      label.en: Date available
      search: false # TODO: pridat pro kuratora

    dateModified:
      # The date of the last update to the resource, not metadata
      #
      # týká se dokumentu/obsahu, nikoliv metadat!!!
      # neukazuje se ve vkládacím formuláři. jen při editaci záznamu!
      use: 'nr-datatypes#NRDate'
      sample:
        faker: date
      label.cs: Datum změny zdroje
      label.en: Date modified
      search: false
      # TODO: zkontrolovat oaipmh na dateModified, jestli tohle je ok

    dateIssued:
      # TODO: kde je?
      # TODO: ve facetach granularita kalendarni rok

    subjects[]:
      ^label.cs: 'Klíčová slova'
      ^label.en: 'Keywords'
      ^ui:
        marshmallow:
          field-class: NRSubjectListField
          imports:
            - import: nr_metadata.ui_schema.subjects.NRSubjectListField

      # subject by vocabularies or free-form keywords created by author(s)
      use: 'nr-datatypes#NRSubject'
      ^uniqueItems: true

    publishers[]:
      # volný zápis vydavatele
      type: fulltext
      ^uniqueItems: true
      sample:
        faker: company
      ^label.cs: Vydavatelé
      ^label.en: Publishers
      search: false

    subjectCategories[]:
      # FRASCATI oborové třídění - může sloužit jako podklad pro oborové filtrování
      use: 'nr-datatypes#NRSubjectCategory'
      ^label.cs: Oborové třídění
      ^label.en: Subject categories
      ^uniqueItems: true
      search: false

    languages[]:
      # ISO 639-2 B in slug, ISO 639-2 T in alias, ISO 639-1 as Alpha2.
      use: 'nr-datatypes#NRLanguage'
      ^label.cs: Jazyk
      ^label.en: Language
      ^minItems: 1
      ^required: true
      ^uniqueItems: true

    notes[]:
      # Free-form note for any comment that couldn't be inserted in any other fields.
      type: fulltext
      ^uniqueItems: true
      ^label.cs: Poznámky
      ^label.en: Notes
      search: false

    abstract:
      type: multilingual
      label.cs: Abstrakt
      label.en: Abstract
      search: false

    methods:
      type: multilingual
      label.cs: Metodologie
      label.en: Methods
      search: false

    technicalInfo:
      # detailed information that may be associated with
      # design, implementation, operation, use, and/or maintenance of a process
      # or system.(may contain HTML)
      type: multilingual
      label.cs: Technické informace
      label.en: Technical information
      search: false

    rights[]:
      # Any license or copyright information for this resource. Taxonomy field.
      use: 'nr-datatypes#NRLicense'
      ^label.cs: Licence
      ^label.en: License
      ^uniqueItems: true

    accessRights:
      # Taxonomy driven list of possible access to the document - open,
      # embargoed, restirected and metadata only access. Based on COAR
      # vocabulary - http://vocabularies.coar-repositories.org/documentation/access_rights/",
      use: 'nr-datatypes#NRAccessRights'
      required: true

    relatedItems[]:
      use: 'nr-datatypes#NRRelatedItem'
      ^uniqueItems: true
      ^label.cs: 'Vazba na/z dalších zdrojů:'
      ^label.en: 'Link to/from other resources:'
      # TODO: nastavit search: false na vsech castech relatedItems

    fundingReferences[]:
      use: 'nr-datatypes#NRFundingReference'
      ^uniqueItems: true
      ^label.cs: 'Projekt nebo financování'
      ^label.en: 'Funding'

    version:
      # verze obsahu, nikoliv záznamu. hodnota ve formuláři není editovatelná.
      type: keyword
      sample: ['1.0', '1.1', '2.0', '2.1', '2.2']
      label.cs: Verze zdroje
      label.en: Resource version
      search: false

    geoLocations[]:
      use: 'nr-datatypes#NRGeoLocation'
      ^label.cs: Geolokace
      ^label.en: Geolocation
      ^uniqueItems: true
      search: false

    accessibility:
      # textové vyjádření dostupnosti souborů, primárně pro harvestované zdroje.
      # nastavuje se pro každý zdroj zvlášť během konverze podle dostupnosti souborů
      # ve zdrojovém systému. ve vkládacím formuláři by bylo pouze pro restricted access
      type: multilingual
      label.cs: Dostupnost zdroje
      label.en: Resource accessibility
      ui:
        detail: string
        marshmallow:
          field-class: MultilingualLocalizedUIField
          imports:
            - import: oarepo_runtime.i18n.ui_schema.MultilingualLocalizedUIField
      # TODO: search/faceta pro kuratora

    series[]: # TODO: NRSeries
      # edice; tématicky sdružuje podobné věci, nemusí se jednat o pravou edici,
      # ale tagování/grupování podobných záznamů
      ^uniqueItems: true
      ^label.cs: Série
      ^label.en: Series
      use: 'nr-datatypes#NRSeries'
      search: false
      # TODO: ale presto musi byt proklikatelna z detailu - to ted nejde protoze tam je to zalozeno
      # na facetech - zmenit na full search pres teckovou notaci

    externalLocation: # TODO: NRExternalLocation
      use: 'nr-datatypes#NRExternalLocation'
      search: false

    originalRecord:
      # odkaz na původní záznam, zobrazovat koncovému uživateli v detailu záznamu
      # jako původní místo uložení. objevuje se jen u harvestu
      type: url
      sample:
        faker: url
      label.cs: Odkaz na původní záznam
      label.en: Original record URL
      search: false

    objectIdentifiers[]:
      # Persistent identifier/s of object as ISBN, DOI, etc. + assigned by National Repository.
      use: 'nr-datatypes#NRObjectPID'
      ^label.cs: Identifikátory objektu
      ^label.en: Object identifiers
      ^uniqueItems: true
      search: false
      # TODO: pro kuratory je zajimavy type (pocet zaznamu s konkretnim typem + filtr)

    systemIdentifiers[]:
      use: 'nr-datatypes#NRSystemIdentifier'
      ^label.cs: Systémové identifikátory
      ^label.en: System identifiers
      ^uniqueItems: true
      search: false
      # TODO: pro kuratory je zajimavy type (pocet zaznamu s konkretnim typem + filtr)

    events[]:
      use: 'nr-datatypes#NREvent'
      ^label.cs: Události
      ^label.en: Events
      search: false

CommonModel:
  $id: CommonModel
  marshmallow:
    class: nr_metadata.common.services.records.schema.NRCommonRecordSchema
    imports:
      - import: nr_metadata.common.services.records.schema.NRCommonRecordSchema
  ui:
    marshmallow:
      class: nr_metadata.common.services.records.ui_schema.NRCommonRecordUISchema
      imports:
        - import: nr_metadata.common.services.records.ui_schema.NRCommonRecordUISchema
  use: [invenio]

  properties:
    metadata:
      use: ['nr-common-metadata#CommonMetadata']
